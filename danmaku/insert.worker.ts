
import worker from "./worker-loader/inline.js";

// 运行在work中的弹幕解析器，可直接从B站新版脚本中提取更新（貌似基本不需要更新了）
export default <new () => Worker><unknown>function () {
  return worker(`/*! #metadata# @jsc/video: 2.87.0-5980467e (2022-09-20T10:03:56.417Z) */!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="//s1.hdslb.com/bfs/static/player/main/",t(t.s=0)}([function(e,r,t){"use strict";t.r(r);var n=self;n.addEventListener("message",(function(e){for(var r=e.data,t=[],o=0,u=r.length;o<u;o++){var i=l(r[o]);t.splice(i,0,r[o])}function f(e,r){return e.stime-r.stime}function l(e){if(0===t.length)return 0;if(f(e,t[0])<0)return 0;if(f(e,t[t.length-1])>=0)return t.length;for(var r,n=0,o=t.length-1,u=0;n<=o;){if(r=Math.floor((n+o+1)/2),u++,f(e,t[r-1])>=0&&f(e,t[r])<0)return r;if(f(e,t[r-1])<0?o=r-1:f(e,t[r])>=0?n=r:console.error("Catch an ERROR"),u>1e3){console.error("1000");break}}return-1}n.postMessage(t)})),r.default=null}]);\n//@ sourceURL=dm-insert.js`, "Worker", undefined, undefined);
}
